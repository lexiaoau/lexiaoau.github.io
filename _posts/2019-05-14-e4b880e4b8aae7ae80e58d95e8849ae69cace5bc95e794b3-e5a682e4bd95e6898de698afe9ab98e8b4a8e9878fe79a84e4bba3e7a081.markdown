---
author: lexiao
comments: true
date: 2019-05-14 01:34:45+00:00
layout: post
link: http://localhost/blog/?p=327
slug: '%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e8%84%9a%e6%9c%ac%e5%bc%95%e7%94%b3-%e5%a6%82%e4%bd%95%e6%89%8d%e6%98%af%e9%ab%98%e8%b4%a8%e9%87%8f%e7%9a%84%e4%bb%a3%e7%a0%81'
title: 一个简单脚本引申--如何才是高质量的代码
wordpress_id: 327
categories:
- 工作方法论
---

  


为core-oam的 access control 项目写的一个修改“配置文件”的脚本，一开始有很多问题都没有考虑到。

现在做一下小结，思考如何才能写出高质量的代码：

  


  


  1. 可移植性——要能被其他人使用，而无错误
    1. 闭合性——把只供本函数内部使用的变量封装到函数内部作为局部变量。这样在移植时，就不会漏掉而出现丢失变量的情况。
    2. 防攻击——对（被别人）传进来的参数要进行检查（参数个数，值的范围，文件是否存在，等等），以保证在进一步处理参数的时候，不会因为别人的错误而导致我的错误。
    3. 可重入性
      1. 可多次重复执行，而不会有叠加的错误。例如，执行一次就增加一个空白行的话，那么执行10次就会增加10行。积少成多，就恐怖了。
      2. 多次调用的话，就不能在第一次执行时就退出；否则就不能重入了。
  2. 良好的注释和说明——要清楚、尽量详细地告诉别人应该如何正确使用该函数。给注释，给使用的example。
  3.   

